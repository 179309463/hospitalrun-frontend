{{#edit-panel editPanelProps=editPanelProps}}
  <div class="panel panel-primary">
    <div class="panel-body">
      <div class="row">
        <div class="form-input-group">
          <label for="customFormSelect">{{t 'admin.customForms.labels.customForm'}}</label>
          <select onchange={{action 'selectForm' value="target.value"}} class="form-control" id="customFormSelect">
            <option disabled selected={{is-not currentForm}}></option>
            {{#each model as |customForm|}}
              <option value={{customForm.id}}
              selected={{eq customForm.id currentForm}}>
              {{customForm.name}}
              </option>
            {{/each}}
          </select>
        </div>
      </div>
      <div class="row">
        <button class="btn btn-default" {{action 'addForm'}}>{{t 'admin.customForms.buttons.addForm'}}</button>
      </div>
    </div>
  </div>
  {{#if currentForm}}
    <div class="panel panel-primary">
      <div class="panel-heading">
        <h3 class="panel-title">{{formName}}</h3>
      </div>
      <div class="panel-body">
        {{#em-form model=this submitButton=false}}
          <div class="row">
            {{em-input property="currentForm.name" label=(t 'admin.customForms.labels.formName') class="form-input-group required col-xs-4"}}
            {{em-select class="col-xs-3 form-input-group" label=(t 'admin.customForms.labels.formType')
              property="currentForm.formType" content=formTypes
            }}
            {{em-input property="currentForm.columns" label=(t 'admin.customForms.labels.columns') class="form-input-group required col-xs-2"}}
          </div>
          <h4>
            {{t 'admin.customForms.titles.fields'}}
            <button class="btn btn-default align-right" {{action 'addField'}}>
              {{t 'admin.customForms.buttons.addField'}}
            </button>
          </h4>
          <table class="table">
            <tr class="table-header">
              <th>{{t 'admin.customForms.labels.label'}}</th>
              <th>{{t 'labels.type'}}</th>
              <th>{{t 'labels.action'}}</th>
            </tr>
            {{#each currentForm.fields as |field index|}}
              <tr>
                <td>{{field.label}}</td>
                <td>{{t (concat 'admin.customForms.labels.' field.type)}}</td>
                <td>
                  <button class="btn btn-default warning" {{action "deleteField" field bubbles=false }}>
                    <span class="octicon octicon-x"></span>{{t "buttons.delete"}}
                  </button>
                  <button class="btn btn-default neutral" {{action 'editField' field bubbles=false }}>
                    {{t 'buttons.edit'}}
                  </button>
                  {{#if (not-eq index 0)}}
                    <button class="btn btn-default neutral" {{action 'moveFieldUp' field bubbles=false }}>
                       <span class="glyphicon glyphicon-chevron-up" aria-hidden="true"></span>
                      {{t 'admin.customForms.buttons.moveUp'}}
                    </button>
                  {{/if}}
                  {{#if (lt index lastFieldIndex)}}
                    <button class="btn btn-default neutral" {{action 'moveFieldDown' field bubbles=false }}>
                       <span class="glyphicon glyphicon-chevron-down" aria-hidden="true"></span>
                      {{t 'admin.customForms.buttons.moveDown'}}
                    </button>
                  {{/if}}
                </td>
              </tr>
            {{/each}}
          </table>
        {{/em-form}}
      </div>
    </div>
    <button class="btn btn-default neutral" {{action 'togglePreview' bubbles=false }}>
      {{t 'admin.customForms.buttons.preview'}}
    </button>
    {{#if preview}}
      <div class="panel panel-primary">
        <div class="panel-heading">
          <h3 class="panel-title">{{formName}}</h3>
        </div>
        <div class="panel-body">
          {{#em-form model=previewModel submitButton=false}}
            {{custom-form model=previewModel form=currentForm}}
          {{/em-form}}
        </div>
      </div>
    {{/if}}
  {{/if}}
{{/edit-panel}}
